<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:MoleculeEfficienceTracker"
    xmlns:chart="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
    x:Class="MoleculeEfficienceTracker.ChargePage"
    Title="Charge">
    <ContentPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Styles/ModernStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Color x:Key="MainBgColor">#F0F4F8</Color>
        </ResourceDictionary>
    </ContentPage.Resources>
    <ContentPage.Background>
        <SolidColorBrush Color="{StaticResource MainBgColor}"/>
    </ContentPage.Background>

    <ScrollView>
        <VerticalStackLayout Style="{StaticResource PageRootLayoutStyle}">
            <Label Text="Moyennes journaliÃ¨res"
                   Style="{StaticResource CompactHeaderStyle}"/>

            <Label Text="24h"
                   Style="{StaticResource CompactHeaderStyle}"/>
            <CollectionView x:Name="StatsCollection1d"
                            SelectionMode="Single"
                            HeightRequest="220">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:ChargePage.StatsEntry">
                        <Frame Style="{StaticResource CardFrameStyle}"
                               Margin="0,4"
                               Padding="10">
                            <Grid ColumnDefinitions="Auto,2*,Auto,Auto,Auto"
                                  RowDefinitions="Auto,Auto"
                                  ColumnSpacing="8">
                                <Label Grid.RowSpan="2"
                                       Text="{Binding Emoji}"
                                       FontSize="20"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="1"
                                       Text="{Binding MoleculeName}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="2"
                                       Text="{Binding AvgDose, StringFormat='{0:F1} mg'}"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="3"
                                       Text="{Binding AvgCount, StringFormat='{0:F1} prises'}"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="4"
                                       Text="{Binding VariationText}"
                                       TextColor="{Binding VariationColor}"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                <ProgressBar Grid.Row="1"
                                             Grid.Column="1"
                                             Grid.ColumnSpan="4"
                                             Progress="{Binding VariationProgress}"
                                             ProgressColor="{Binding VariationColor}"
                                             HeightRequest="4"
                                             Margin="0,4,0,0"/>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Label Text="7 jours"
                   Style="{StaticResource CompactHeaderStyle}"/>
            <CollectionView x:Name="StatsCollection7d"
                            SelectionMode="Single"
                            HeightRequest="220">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:ChargePage.StatsEntry">
                        <Frame Style="{StaticResource CardFrameStyle}"
                               Margin="0,4"
                               Padding="10">
                            <Grid ColumnDefinitions="Auto,2*,Auto,Auto,Auto"
                                  RowDefinitions="Auto,Auto"
                                  ColumnSpacing="8">
                                <Label Grid.RowSpan="2"
                                       Text="{Binding Emoji}"
                                       FontSize="20"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="1"
                                       Text="{Binding MoleculeName}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="2"
                                       Text="{Binding AvgDose, StringFormat='{0:F1} mg'}"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="3"
                                       Text="{Binding AvgCount, StringFormat='{0:F1} prises'}"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="4"
                                       Text="{Binding VariationText}"
                                       TextColor="{Binding VariationColor}"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                <ProgressBar Grid.Row="1"
                                             Grid.Column="1"
                                             Grid.ColumnSpan="4"
                                             Progress="{Binding VariationProgress}"
                                             ProgressColor="{Binding VariationColor}"
                                             HeightRequest="4"
                                             Margin="0,4,0,0"/>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


            <Label Text="30 jours"
                   Style="{StaticResource CompactHeaderStyle}"/>
            <CollectionView x:Name="StatsCollection30d"
                            SelectionMode="Single"
                            HeightRequest="220">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:ChargePage.StatsEntry">
                        <Frame Style="{StaticResource CardFrameStyle}"
                               Margin="0,4"
                               Padding="10">
                            <Grid ColumnDefinitions="Auto,2*,Auto,Auto,Auto"
                                  RowDefinitions="Auto,Auto"
                                  ColumnSpacing="8">
                                <Label Grid.RowSpan="2"
                                       Text="{Binding Emoji}"
                                       FontSize="20"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="1"
                                       Text="{Binding MoleculeName}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="2"
                                       Text="{Binding AvgDose, StringFormat='{0:F1} mg'}"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="3"
                                       Text="{Binding AvgCount, StringFormat='{0:F1} prises'}"
                                       VerticalOptions="Center"/>
                                <Label Grid.Column="4"
                                       Text="{Binding VariationText}"
                                       TextColor="{Binding VariationColor}"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                <ProgressBar Grid.Row="1"
                                             Grid.Column="1"
                                             Grid.ColumnSpan="4"
                                             Progress="{Binding VariationProgress}"
                                             ProgressColor="{Binding VariationColor}"
                                             HeightRequest="4"
                                             Margin="0,4,0,0"/>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>